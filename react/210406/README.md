# 21/04/06 학습 내용

### Redux

- 리덕스는 상태 관리 라이브러리로서, 사용 시 이점은 다음과 같다.

  1. 컴포넌트의 상태 관리 로직을 다른 파일로 분리하여 상태를 더욱 효율적으로 관리할 수 있음.

  2. 글로벌 상태 관리도 손쉽게 할 수 있음.

- 리덕스는 리액트만을 위한 라이브러리가 아니다. 즉, 리액트 뿐만 아니라 일반 자바스크립트나 Angular 등 다른 프레임워크에서 사용되기도 한다.

- Context API + `useReducer`를 함께 사용하는 방식과 비슷하다.

  - 글로벌로 관리할 상태가 별로 없다면 굳이 리덕스를 쓸 필요는 없음.

- 리덕스와 Context API의 차이점

  1. 리덕스에선 미들웨어를 통해 다양한 작업들을 할 수 있음. 특히 비동기 작업을 더욱 체계적으로 처리할 수 있음.

  2. `react-redux`의 유용한 함수들을 사용할 수 있음.

      - `connect`

      - `useSelector`

      - `useDispatch`

      - `useStore`

  3. 기본적인 최적화가 자동적으로 이루어짐.

  4. 모든 상태를 하나의 커다란 상태로 관리하기 때문에, Context API처럼 매번 상태를 만들지 않아도 됨.

  5. DevTools라는 리덕스 개발자 툴을 사용할 수 있음.

- 리덕스는 언제 사용하는 것이 좋을까?

  - 프로젝트의 규모가 클 때

  - 비동기 작업이 잦을 때

___
### 리덕스에서 사용되는 키워드

#### 액션(Action)

- 상태에 어떤 변화가 필요하게 될 때, 액션이라는 객체가 있어야 됨.

- 액션에는 `type`이라는 프로퍼티는 필수고, 그 밖에 다른 값들도 payload로서 전달할 수 있음.

#### 액션 생성 함수(Action Creator)

- parameter를 받아와서 액션을 만들어주는 함수

  ```js
  // ex
  const readCurrentUser = () => ({
    type: READ_CURRENT_USER,
  });

  const addCurrentUser = (userData) => ({
    type: ADD_CURRENT_USER,
    data: userData,
  });
  ```

- 액션 생성 함수를 필수로 만들 필요는 없지만, 액션 객체를 만들기가 편리해짐. 액션 생성 함수를 만들지 않으면 액션이 발생할 때마다 액션 객체를 생성하기 위한 코드를 매번 작성해줘야 함.

#### 리듀서(Reducer)

- 리듀서는 변화를 일으키는 함수임.

- state와 action을 인자로 전달 받는데, 액션의 타입이 무엇인지에 따라 다른 업데이트 작업을 수행함.

- 불변성을 꼭 유지해줘야 함.

- 일반적으로 리덕스의 리듀서에서는 `default`로 기존 `state`를 그대로 반환해줌.

#### 스토어(Store)

- 리덕스에선 하나의 애플리케이션 당 하나의 스토어를 만들게 됨.

- 스토어에는 현재 앱의 상태와 리듀서가 들어있고, 그 밖의 <b>내장 함수</b>들이 들어있음.

  - 내장 함수에는 디스패치(dispatch)도 있는데, 디스패치는 액션을 발생시킴(=액션을 스토어에 전달함).

  - 디스패치에 액션 객체를 인자로 넣어서 호출하면, 해당 액션이 리듀서에 전달이 되어 리듀서에서 새로운 상태가 반환이 되면 스토어의 상태가 갱신이 되는 것임.

    ![image](https://user-images.githubusercontent.com/54733637/113711130-87058b80-971f-11eb-9110-f96d8c7499f6.png)

  - 내장 함수에는 구독(subscribe)도 있음.

    - subscribe 함수를 호출할 때 인자로 특정 함수를 전달하면 액션이 디스패치될 때마다 해당 함수가 호출됨. 즉, 스토어의 상태가 업데이트될 때마다 특정 함수를 호출할 수 있게 됨.

___
### 리덕스의 3가지 규칙

1. 하나의 애플리케이션엔 단 하나의 스토어만 두기!

2. 상태(state)는 읽기 전용! → 불변성 지키기🚩

3. 리듀서는 🌠순수 함수여야 함.

    - 순수 함수(pure function) : 어떠한 외부 상태에 의존하지도 않고, 외부 상태를 변경하지도 않는 함수를 뜻함. 즉 순수 함수가 되려면 <b>부수 효과가 없어야</b> 함. 순수 함수는 <b>동일한 인수</b>가 전달되면 언제나 <b>동일한 값을 반환</b>해야 함. (동일 인풋 → 동일 아웃풋)

    - 따라서 리듀서 내에서 다음과 같이, 호출할 때마다 다른 값을 반환하는 함수들은 사용하면 안됨.

      - `new Date()`

      - `Math.random()`

      - `axios.get()`과 같은 네트워크 요청 함수

    - 또한 리듀서 밖의 어떤 변수에 의존하는 것도 안됨.
